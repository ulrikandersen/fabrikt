package {{ client }}

import java.io.IOException

/**
 * Sealed interface representing all possible network errors that can occur during API calls.
 */
sealed interface NetworkError {
    /**
     * HTTP error response (4xx, 5xx status codes).
     * @property statusCode The HTTP status code
     * @property message Optional error message from the response body
     */
    data class Http(val statusCode: Int, val message: String? = null) : NetworkError

    /**
     * Network connectivity error (connection timeout, DNS failure, etc.).
     * @property cause The underlying IOException, if available
     */
    data class Network(val cause: IOException? = null) : NetworkError

    /**
     * Serialization/deserialization error when parsing the response.
     * @property cause The underlying exception (SerializationException or ContentConvertException)
     */
    data class Serialization(val cause: Exception) : NetworkError

    /**
     * Unknown error that doesn't fit other categories.
     */
    data object Unknown : NetworkError
}

/**
 * Sealed interface representing the result of a network operation.
 * @param T The type of data returned on success
 */
sealed interface NetworkResult<out T> {
    /**
     * Successful response with data.
     * @property data The deserialized response data
     */
    data class Success<T>(val data: T) : NetworkResult<T>

    /**
     * Failure response.
     * @property error The network error that occurred
     */
    data class Failure(val error: NetworkError) : NetworkResult<Nothing>
}
